# Ускорение, эффективность, масштабируемость, учет коммуникаций при оценке эффективности, коэффициент сетевой деградации
![[Ускорение, эффективность, масштабируемость, закон Амдала#Ускорение]]
![[Ускорение, эффективность, масштабируемость, закон Амдала#Эффективность]]
![[Ускорение, эффективность, масштабируемость, закон Амдала#Масштабируемость]]
## Учет коммуникаций при оценке эффективности, коэффициент сетевой деградации
Оценивая длительность расчетов по параллельному алгоритму рассмотрим далее случай, когда последний хорошо сбалансирован: во всех задачах предусматривается производство одинакового количества арифметических и коммуникационных операций (пусть и различных для двух выбранных ветвей в один момент времени), а время простоев несущественно. Тогда искомую оценку можно представить как Tp =tа+tк, где первое слагаемое есть длительность арифметических операций (в рассматриваемом идеализированном случае принимается за T1 /p), второе – время коммуникаций. Подставляя ее в выражения (16) и (17) получаем:
(20)
$$
S=\frac{pt_{a}}{t_{a}+t_{k}}=\frac{p}{1+w}; \ E=\frac{1}{1+w}
$$
где:
- $w=\frac{t_{k}}{t_{a}}$ - коэффициент сетевой деградации
- $pt_{a}=T^1$

Действительно, при отсутствии зависимостей между задачами параллельного алгоритма, а следовательно и необходимости в обмене данных, $t_{к}=0$, а эффективность такого алгоритма $E=1$ (составляет $100\%$). Влияние коммуникационных издержек на эффективность зависит от их отношения к длительности арифметических операций; это и есть коэффициент сетевой деградации. 

Иллюстрируя применение (20) остановимся подробнее на упомянутом ранее двухзадачном параллельном алгоритме метода встречных прогонок. Первый шаг этого алгоритма связан с производством прямых ходов прогонок: в первой задаче по методу правой прогонки для уравнений первой половины системы, во второй – по методу левой прогонки для второй половины. На втором шаге предусматривается обмен прогоночными коэффициентами двух соседних уравнений из середины системы, отнесенных к ведению разных задач, и нахождение двух принадлежащих к этим уравнениям (после прямого хода третье неизвестное исключается) неизвестных. Завершающий третий шаг алгоритма состоит из инструкций обратного хода правой прогонки для первой половины уравнений и левой для второй в первой и второй задачах соответственно. 

В рассматриваемом алгоритме предусмотрена одна коммуникация на втором шаге, в ходе которой каждая задача отсылает и принимает пару прогоночных коэффициентов. При этом длительность этой коммуникации не зависит от размерности системы, чего нельзя сказать о времени арифметических операций: $t_{a}=t_{a}(n)$. Подставляя в ф. (20) число задач алгоритма, запишем:
$$
S=\frac{2}{1+\frac{t_{k}}{t_{a}(n)}}
$$
При достаточно малых $n$, таких, что $t_{k}>t_{a}(n)$, ускорение окажется меньше единицы (что видно на графике из рис. 16) и расчеты по параллельному алгоритму производятся медленнее, чем по последовательному. С ростом $n$ длительность арифметических операций увеличивается и ускорение растет, проходя через 1 и достигая 2, когда вторым слагаемым в знаменателе из (21) можно пренебречь.

Возвращаясь к обсуждению формулы (20) с общей точки зрения, а именно к смыслу коэффициента сетевой деградации, представим последний в виде: $w=\frac{t_{k}}{t_{a}}=\frac{q}{Q}\cdot \frac{\tau_{к}}{\tau_{а}}$, где:
- время коммуникаций определяется их количеством $q$ и длительностью одного обмена $\tau_{к}$; 
- время арифметических действий – количеством Q и длительностью одной арифметической операции $\tau_{а}$. 
- Частное $\frac{q}{Q}$ именуют алгоритмической частью коэффициента сетевой деградации, как определяющейся из исследуемого алгоритма; 
- $\frac{\tau_{к}}{\tau_{а}}$ – технической частью, зависящей от параметров конкретной вычислительной системы, на которой предполагается реализация параллельного алгоритма. 

В свою очередь, при задании $\tau_{к}$ необходимо учитывать, что время одной коммуникации складывается из длительности подготовительного этапа (время латентности или установки) и числа отправленных по сети пакетов, умноженного на время пересылки одного пакета. Указанные времена зависят от маршрутизации сообщений и в общем случае могут варьироваться даже на одной вычислительной системе. Их точная оценка зачастую возможна лишь в ходе проведения натурного исследования, когда техническая часть коэффициента сетевой деградации определяется экспериментально. 

Как отмечалось ранее, помимо коммуникаций между ветвями параллельного вычислительного процесса, на длительность вычислений существенное (а иногда и определяющее) влияние оказывают пересылки, сопровождающие производство расчетов внутри одной ветви и связанные с перемещением данных между иерархическими уровнями памяти ЭВМ. В выражении (20) длительность таких пересылок не учитывается. Кроме того, часть коммуникаций производится одновременно с арифметическим операциями, что ставит под сомнение предположение о нахождении общей длительности вычислений как суммы времени арифметических и коммуникационных операций: $T^p=t_{a}+t_{к}$. Действительно, в большинстве случаев разработчик параллельного алгоритма и программного комплекса не в состоянии напрямую управлять ходом вычислительного процесса со степенью детализации, достаточной не только для точного указания значений всех параметров в ф. (20), но и для уверенности в адекватности математической модели, выраженной формулой (20). 

Более точные модели для оценки длительности вычислений (основанные, например, на темпоральных сетях Петри) строятся не для параллельного алгоритма, а для его реализации на конкретной вычислительной системе с учетом множества особенностей последней. В силу изложенного примем, что наиболее достоверные значения характеристик параллельного алгоритма (ускорения, эффективности и масштабируемости) могут быть получены только в ходе натурного эксперимента, будучи неразрывно связаны с конкретными вычислительными процессами.