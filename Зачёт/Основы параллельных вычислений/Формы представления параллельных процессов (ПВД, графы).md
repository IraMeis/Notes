# Формы представления параллельных процессов (ПВД, графы)

## Пространственно-временные диаграммы (ПВД)
В качестве примера рассмотрим следующий алгоритм вычисления корней квадратного уравнения с положительным дискриминантом. Инструкции будем маркировать большими буквами русского алфавита, инициализация не требуется в силу отсутствия начальных данных.
![[Pasted image 20220612141707.png]]
Вычислительный процесс, определенный этим алгоритмом, можно кратко описать последовательностью исполнения инструкций: A, Б, В, Г, Д (процесс $Q_{1}$). Вместе с тем, указанный процесс нельзя назвать необходимым, существует еще один, приводящий к тому же результату: A, Б, Г, В, Д (процесс $Q_{2}$) и именно он может оказаться реализованным на вычислительной системе при исполнении Алгоритма 1.3 в силу предварительной выборки команд (за один такт из памяти извлекается несколько инструкций). Более того, возможен другой процесс $Q_{3}$, эквивалентный рассмотренным, в котором инструкции В и Г исполнятся параллельно – то есть одновременно.

Далее будем говорить о двух процессах как об эквивалентных, если при одинаковых входных данных они приводят к одному результату. Сравнению подлежат исключительно эквивалентные вычислительные процессы. 

В пространственно-временной диаграмме на рис. 1.9 связаны инструкции Алгоритма 1.3 (отложены по оси ординат) и время (ось абсцисс) их исполнения. Для простоты длительность исполнения всех операций принята одинаковой. Отрезком обозначается исполнение выбранной инструкции в определенное время. Последнее может отсчитываться в секундах либо тактах процессора.
![[Pasted image 20220612141800.png]]
Пространственно-временная диаграмма представляет исчерпывающую информацию о вычислительном процессе, однако при анализе длительных процессов, включающих исполнение тысяч инструкций, может оказаться чрезмерно громоздкой. Тогда принято объединять инструкции в блоки, выделять различные ветви вычислительного процесса, внутри которых инструкции выполняются последовательно, наносить на диаграмму дополнительные обозначения, поясняющие движение данных между такими ветвями
## Графы
Более развитые модели вычислительных процессов представляются в виде ориентированных графов, для задания которых необходимо определить множества вершин и бинарные отношение на этих множествах. 

Каждой инструкции алгоритма поставим в биективное соответствие действие вычислительной системы по ее исполнению. В действительности таких действий будет несколько и возможно они не производятся непрерывно, однако здесь объединим их в одно слитное. Совокупность таких действий определит множество вершин графа. 

Будем говорить, что действия $d_{1}$ и $d_{2}$ вступают в бинарное отношение непосредственного следования ($d_{2}$ непосредственно следует за $d_{1}$), если $d_{2}$ начинается после завершения $d_{1}$ и отсутствует действие $d_{3}$, стартующее после завершения $d_{1}$ и финиширующее перед началом $d_{2}$. Указанное бинарное отношение на множестве действий задает дуги искомого графа, который назовем графом непосредственного следования. 

Ни рис. 1.10 представлены графы непосредственного следования для примера из предыдущего пункта, где для ясности действия маркированы теми же литерами, что инструкции в Алгоритме 1.3.

Как видно из сравнения рис. 1.10 а, б, в, процессы $Q_{1}$, $Q_{2}$ и $Q_{3}$ отличаются последовательностью действий В и Г, как и в пространственно-временной диаграмме на рис. 1.9. В $Q_{1}$ действие Г непосредственно следует за В, в $Q_{2}$ наоборот В за Г, а в $Q_{3}$ обсуждаемые действия не вступают в отношение непосредственного следования.
![[Pasted image 20220612141932.png]]

Далее, на основе введенного бинарного отношения, посредством его транзитивного замыкания, строят новое отношение – следования. Граф следования характеризуется тем же множеством вершин, что и предыдущий. Практически, построение транзитивного замыкания отношения непосредственного следования заключается в соединении дополнительными дугами (прежние остаются) вершин на графе, ранее связанных через одного или нескольких посредников (рис. 1.11).
![[Pasted image 20220612142024.png]]

Может показаться, что введение нового бинарного отношения усложнит анализ вычислительных процессов. Действительно, графы на рис. 1.11 выглядят избыточными по сравнению с изображенными на рис.1.10, однако следующий формализм сравнения процессов основан на использовании именно отношения следования. 

Назовем вычислительный процесс $Q$ не менее параллельным, чем некоторый $Q'$, эквивалентный $Q$, если для любой пары действий $d_{1},d_{2}$, такой что в $Q$ $d_{2}$ следует за $d_{1}$, верно, что и в $Q'$ действие $d_{2}$ также следует за действием $d_{1}$. 

Так, сравнивая процессы $Q_{1}$, $Q_{2}$ и $Q_{3}$ по их графам следования на рис. 1.11, отметим $Q_{3}$ как не менее параллельный, чем $Q_{1}$ и $Q_{2}$; последние же два процесса как несравнимые между собой по введенному правилу. Действительно, в $Q_{1}$ действие Г следует за В (в $Q_{2}$ не следует), а в $Q_{2}$ В следует за Г (в $Q_{1}$ не следует). 

Максимально параллельным назовем вычислительный процесс, не менее параллельный, чем все, ему эквивалентные. 

Обсуждая некоторый максимально параллельный процесс (в нашем примере это $Q_{3}$) заметим, что все его действия, вступающие в бинарное отношение следования, вступают в это же отношение и такими же парами во всех эквивалентных процессах ($Q_{1}$ и $Q_{2}$ в примере). Вместе с тем, указанных пар, по сравнению с остальными эквивалентными процессами, в обсуждаемом меньше. А значит больше действий свободно от следования друг за другом и выполняются одновременно, тогда и длительность максимально параллельного процесса окажется наименьшей по сравнению с остальными. 

Сочтем два алгоритма эквивалентными, если эквивалентны любые два вычислительных процесса, ими определенные. 

Укажем на алгоритм A, как на не менее параллельный, чем алгоритм B, эквивалентный A, если множество вычислительных процессов, определенных A, содержит множество вычислительных процессов, определенных B, в качестве подмножества. 

Максимально параллельным назовем алгоритм, не менее параллельный, чем все ему эквивалентные. 

Таким образом, лучшим с представленной теоретической точки зрения будет алгоритм, определяющий наиболее мощное множество эквивалентных вычислительных процессов, включающее все возможные их реализации. На практике же предпочтение отдается построению алгоритмов, ориентированных на конкретные вычислительные системы и определяющих узкий круг процессов, в этих системах протекающих.