# Правила постановки вычислительных экспериментов и анализа их результатов
Разделим понятия натурного и вычислительного экспериментов по способу получения искомых величин. В случае, когда последние рассчитываются будем говорить о вычислительном эксперименте; если они измеряются – о натурном. Так, один и тот же эксперимент может оказаться одновременно и вычислительным и натурным. Например, при разностном решении задачи теплопроводности с помощью параллельного алгоритма значения температурного поля рассчитываются, а длительность вычислений измеряется. В рамках настоящего текста все алгоритмы рассматриваются исключительно с точки зрения сокращения времени вычислений, следовательно их экспериментальное исследование сопровождается постановкой натурных экспериментов. 

Далее читателю предлагается последовательность этапов, соблюдение которой полезно при производстве экспериментального исследования чего-либо, в том числе и параллельных алгоритмов.

## 1. Постановка цели эксперимента
Ясное представление о цели и задачах экспериментальной деятельности необходимо исследователю перед ее началом. Для чего ставится эксперимент, какая проблема получит решение в результате его проведения, что ранее предпринимали другие исследователи в аналогичной ситуации?
## 2. Выбор инструментальных средств эксперимента
Поставленной цели должны соответствовать инструментальные средства эксперимента. В контексте данной работы их можно разделить на программные, системные и аппаратные. К первым относится программная реализация исследуемого алгоритма, которая либо выбирается из известной библиотеки, либо разрабатывается самостоятельно. При этом особое внимание уделяется используемому языку программирования, который должен соответствовать исследуемому алгоритму. Например, обеспечивать заданный шаг выборки данных из памяти; предусматривать использование конструкций, совпадающих или схожих с применяемыми в алгоритме. Так, на языке фортран естественным образом описываются векторные операции, однако матрицы хранятся по столбцам, что неуместно при реализации алгоритмов со строчной схемой хранения. Язык си соответствует требованию построчного хранения матриц, однако в нем не поддерживается векторная нотация.

К системным средствам эксперимента принято относить операционную систему и компилятор. Начинающий экспериментатор зачастую производит выбор системы по критерию удобства, останавливаясь на хорошо ему знакомой и привычной. Вместе с тем, от такого выбора зависит многое: переносимость разработанного программного комплекса, простота его сопряжения со сторонним программным обеспечением, а главное – воспроизводимость экспериментально полученных данных. Например, длительность расчетов на системах семейства windows по одной программе с неизменными параметрами меняется от запуска к запуску в весьма значительных пределах. Операционные системы на основе linux менее распространены, однако их применение позволяет получать более стабильные результаты.

Желательно хорошее соответствие используемого компилятора операционной системе. Так, популярный набор компиляторов GNU Compiler Collection (GCC) изначально создавался для работы с юниксоподобными операционными системами и его версия для windows (к моменту написания настоящего текста) отличается значительно меньшей эффективностью. Важно полноценное использование компилятором и операционной системой тех архитектурных особенностей вычислительной системы, на задействование которых ориентирован исследуемый параллельный алгоритм. Например, превосходная для своего времени среда разработки Fоrtran PowerStation, включающая компилятор фортрана, не позволяет эффективно реализовывать векторные операции на современных процессорах с поддержкой набора инструкций SSE. Или, работая с операционными системами Windows 7 Home Basic и Home Basic Premium невозможно использовать более одного процессора, даже если их несколько.

Продолжая говорить об архитектурных особенностях, на задействование которых ориентирован алгоритм, отметим обязательность их присутствия в выбранных аппаратных средствах эксперимента. Исследователю затруднительно будет изучать свойства параллельного алгоритма на одноядерном процессоре (например, Intel Atom E680T) или исследовать характеристики алгоритма с длинными векторами на центральном процессоре (сколь угодно современном) без задействования графического.

## 3. Выбор параметров эксперимента
Под параметрами эксперимента в рамках настоящего текста будем понимать размерности матриц и блоков, точность представления вещественных чисел в памяти ЭВМ и количество задействованных потоков выполнения вычислительного процесса (число задач алгоритма). В ходе проведения эксперимента для достижения его цели часть параметров варьируется в определенных исследователем пределах с заданным шагом. Указанные определение и задание подлежат тщательному обоснованию при планировании эксперимента.

Выбор параметров в первую очередь должен соответствовать цели эксперимента, во вторую – обеспечить достоверность получаемых результатов. Так, при исследовании масштабируемости некоторого алгоритма размерности матриц в соответствии с ф. (18) должны подбираться таким образом, чтобы длительность вычислений по последовательному и параллельному алгоритмам совпала для заданного числа задач параллельного алгоритма и фиксированной точности представления чисел (двойной либо одинарной).

Кроме того, размерности матриц и блоков не должны быть слишком маленькими, чтобы длительность эксперимента не оказалась чувствительной к случайным системным событиям (во время выполнения программы ЭВМ продолжает жить своей жизнью), способным значимо повлиять на ее измерение. И не слишком большими, с учетом ограничений по времени и стоимости на доступ к вычислительной системе.

Последнее обстоятельство важно и при выборе шага изменения параметров эксперимента. С одной стороны, задание слишком мелкого шага может привести к срыву исследования в силу превышения временных и финансовых ограничений; с другой стороны, использование избыточно большого шага зачастую затрудняет последующий анализ результатов, не характеризующихся в этом случае необходимой точностью.
## 4. Теоретическое предсказание результатов эксперимента
Сколь сложным бы ни был эксперимент, исследователь всегда заранее ориентируется на тот либо иной его исход и руководствуется этими предварительными соображениями на предыдущих этапах планирования, осуществление которых в противном случае оказалось бы невозможным.

При составлении таких предварительных соображений полезно применение теоретических методов из параграфов 3.2 и 3.3, которое в данном случае, в силу оценочного характера такого применения, не стесняется осознанием их ограниченности. Далее, в ходе экспериментального исследования, характеристики алгоритмов будут уточнятся и нет большой беды в их настоящей предварительности.

## 5. Проведение эксперимента
Экспериментальная деятельность сродни охоте и способна увлечь исследователя чрезмерно. Отдавшись ей целиком, молодой ученый вскоре забывает о цели эксперимента и в состоянии азарта производит множество малоосмысленных действий. В итоге перед уставшим экспериментатором оказываются: россыпь заметок с эмоциональными комментариями, колонки невнятных цифр и несколько графиков сомнительного происхождения. Ничего предосудительного для юноши в этом нет (на то она и молодость!), однако всему свое время.

Постоянным спутником начинающего научного работника должен стать лабораторный журнал. В нем фиксируется содержание подготовительных этапов, предваряющих постановку эксперимента (этапы 1-4 настоящей работы), и полученные экспериментально результаты с тщательным указанием всех обстоятельств их получения. Кажущаяся сейчас избыточной та или иная подробность затем может оказаться решающей при анализе результатов и определении дальнейшего направления исследований. Со временем ведение журнала входит в привычку и не составляет затруднений.

Встретившись в ходе экспериментальной деятельности с серьезным препятствием не стоит впадать в крайности: паниковать, отступать или навязчиво повторять одни и те же действия. Необходимо продолжать исследование, как предлагается далее, сохраняя выдержку. Последнему способствует отвлечение на культурный досуг.

## 6. Представление результатов
В настоящем изложении под результатами эксперимента понимаются зависимости характеристик исследуемых алгоритмов (в первую очередь длительность расчетов) от выбранных инструментальных средств и параметров эксперимента.

Предполагаются два способа представления результатов: табличный и графический. Первый характеризуется полнотой, второй – наглядностью. Действительно, по длинным колонкам цифр не каждый исследователь сразу составит ясное представление о результатах эксперимента; в то же время, рассматривая график зачастую сложно почувствовать тенденции, зреющие в чередовании цифр после десятичного разделителя.

Далее, в ходе анализа эксперимента, по существующим табличным данным можно построить новые графики с лучшей детализацией в интересующей области; однако для этого такие данные должны быть изначально сохранены в максимально подробном виде. Интерпретация одних и тех же результатов может значительно варьироваться в зависимости от личности исследователя и обстоятельств рассмотрения результатов. Сами же они остаются неизменными и целиком определяют ценность проведенного эксперимента.
## 7. Описание результатов
Словесное описание результатов – необходимый этап их осмысления. Устное, а еще лучше письменное, выражение наблюдаемых закономерностей значительно упрощает их последующий анализ. Например, рассматривая некоторый график зависимости ускорения вычислений по исследуемому параллельному алгоритму от размерности матрицы, исследователь может отметить, что от значения размерности $n_{1}$ до $n_{2}$ ускорение увеличивается логарифмически, достигая при $n_{2}$ максимального значения $S_{max}$. С дальнейшим увеличением $n$ ускорение линейно падает до $S_{min}$ при размерности $n_{3}$.

Не следует мысленно «сглаживать» графики, избавляя себя от неудобства рассмотрения результатов, не вписывающихся в ожидаемую картину. Возможно, именно эти особенности далее станут ключом к пониманию чего-то важного. Исследователю необходимо оставаться честным в первую очередь перед самим собой, подмечая и фиксируя все странности поведения экспериментально полученных данных.
## 8. Анализ результатов
Если на предыдущем этапе исследователь отвечал на вопрос **как** меняются результаты в зависимости от выбора инструментария и параметров эксперимента, то на данном необходимо выяснить **почему** они так меняются. Например, почему от значения размерности $n_{1}$ до $n_{2}$ ускорение увеличивается логарифмически, достигая при $n_{2}$ максимального значения $S_{max}$? Почему с дальнейшим увеличением n ускорение линейно падает до $S_{min}$ при размерности $n_{3}$? 

Главным подспорьем в этом является сопоставление теоретических предсказаний, сформулированных на этапе 4, и полученных экспериментально результатов. В практике автора настоящей работы теоретические ожидания никогда полностью не совпадали с экспериментальными данными. В лучшем случае такое совпадение при первом рассмотрении имело качественный характер. Так и должно быть, в противном случае экспериментальная деятельность не являлась бы основой научного познания. 

Следующим после горького недоумения действием при анализе экспериментально полученных результатов в случае кардинального их несовпадения с теоретическими ожиданиями должно стать возвращение к предыдущим этапам постановки эксперимента. Возможно ли достижение цели в том виде, в каком она была изначально сформулирована? Или желательна ее корректировка после столкновения с реальностью. Обеспечивает ли произведенный выбор инструментария достижение поставленной цели? Вполне возможно, что необходимо задуматься о его смене на более подходящий. Рационально ли выбраны параметры эксперимента, или уместно сместить диапазон их изменения? Не задуматься ли об адекватности используемой для предсказания результатов теоретической модели в целом или ее параметров в частности? Не нуждается ли она в корректировке? Насколько можно верить полученным экспериментально результатам? Как последние меняются при перестановке эксперимента с теми же параметрами на той же инструментальной базе? С другими параметрами и на другой базе? 

В итоге проведения дополнительных проверок, пересмотра теоретических предположений и повторного производства экспериментов исследователь приходит к одному их трех результатов. 
 - Полученные экспериментально данные и теоретические предположения, сделанные по известной модели, оказываются соответствующими друг другу, по крайней мере качественно. Следовательно, в ходе эксперимента подтверждена адекватность такой модели, а экспериментальные данные, в свою очередь, этой моделью верифицированы. 
 - На основе экспериментальных данных разработана новая модель (или существенно уточнена прежняя); предложено ее теоретическое обоснование и определены границы адекватности. Это сильный теоретический результат, позволяющий существенно расширить представления о вычислительных процессах. Как правило он связан с использованием вычислительной техники на новой архитектурной базе, для которой прежние модели утрачивают адекватность. Так, например, вошла в научный оборот программная модель CUDA (Compute Unified Device Architecture), сейчас широко применяющаяся при разработке программ и алгоритмов, ориентированных на графические ускорители. 
 - Приведение в соответствие теоретических и экспериментальных знаний не увенчалось успехом. В таком случае уместно применение феноменологического подхода, сопровождающегося сознательным отказом от теоретических обобщений и описанием результатов такими, какими они сами себя явили. Фактически, исследования завершаются на седьмом этапе, который приобретает особую ценность и должен быть проведен в силу этого с максимально возможной тщательностью. Феноменологический подход признается полноценным инструментом познания и исследователь не должен стесняться прибегать к нему при необходимости.
## 9. Составление заключения
Выводы по эксперименту в первую очередь должны быть тесно связаны с его целью (этап 1). Она может оказаться достигнутой в ходе экспериментальной деятельности; модифицирована и затем достигнута в новом, измененном виде; либо признана полностью неуместной. В последнем случае такое признание должно сопровождаться веской аргументаций, опирающейся на экспериментальные данные и теоретические построения. 

Во вторую очередь к выводам следует отнести значимые результаты предыдущего этапа: соответствие теоретических построений и практических наблюдений; новые теоретические представления на основе экспериментальных данных; либо признание полученных данных не укладывающимися ни в какие (новые или прежние) теоретические построения. 

В соответствии с концепцией Анаксимена о расширяющемся круге знаний, удачно проведенный эксперимент, в результате которого получены ответы на поставленные вопросы, должен дать пищу для постановки большего количества более глубоких вопросов. В силу этого исследователь не должен избегать новых вопросов (тем более скрывать их), появление которых не является признаком неудачи. Видение новых проблем после решения прежних есть главное свидетельство успеха проведенного исследования. Особенно ценно возникновение кажущихся неразрешимыми парадоксов, которые являются отправной точкой научного синтеза – наиболее эффективного и сложного инструмента познания.